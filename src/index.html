<!doctype html>
<html lang="en-GB">
    <head>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <title>PG Playing</title>

        <style>
            .o-row {
                display: grid;
                grid-auto-columns: 1fr;
                grid-template-areas: "a a";
                gap: 1rem;
            }

            .grimoire {
                border: 2px solid #000;
                background-color: #ccc;
                height: 90vh;
            }

            .seat {
                width: 4rem;
                height: 4rem;
                border: 1px dotted blue;
                background-color: #fff6;
            }
        </style>

    </head>
    <body>

        <details>
            <summary>Script Selection</summary>
            <form id="script">
                <ul id="script-selection">
                    <!--
                    <li>
                        <label for="edition-tb">
                            <input type="radio" name="edition" id="edition-tb" value="tb" required>
                            Trouble Brewing
                        </label>
                    </li>
                    <li>
                        <label for="edition-bmr">
                            <input type="radio" name="edition" id="edition-bmr" value="bmr">
                            Bad Moon Rising
                        </label>
                    </li>
                    <li>
                        <label for="edition-snv">
                            <input type="radio" name="edition" id="edition-snv" value="snv">
                            Sects and Violets
                        </label>
                    </li>
                    -->
                </ul>
                <p><button type="submit">Select</button></p>
            </form>
            <template id="script-select">
                <li>
                    <label class="js--script-select--label">
                        <input type="radio" name="script" class="js--script-select--input">
                        <span class="js--script-select--name"></span>
                    </label>
                </li>
            </template>
        </details>

        <hr>

        <details>
            <summary>Role Selection</summary>
            <div>

                <form class="js--role-select--count-form">
                    <label for="role-select-count">Player count</label>
                    <input type="range" name="role-select-count" id="role-select-count" class="js--role-select--count" min="5" max="20" step="1" value="10" data-output="#role-select-count-output">
                    <output id="role-select-count-output" aria-hidden="true">10</output>
                </form>

                <form class="js--role-select--roles">
                    <fieldset class="js--role-select--team" data-team="townsfolk">
                        <legend class="js--role-select--legend" data-text="Townsfolk ({count}/{max})" data-count="0" data-max="X">Townsfolk</legend>
                        <div class="js--role-select--items"></div>
                    </fieldset>
                    <fieldset class="js--role-select--team" data-team="outsider">
                        <legend class="js--role-select--legend" data-text="Outsiders ({count}/{max})" data-count="0" data-max="X">Outsiders</legend>
                        <div class="js--role-select--items"></div>
                    </fieldset>
                    <fieldset class="js--role-select--team" data-team="minion">
                        <legend class="js--role-select--legend" data-text="Minons ({count}/{max})" data-count="0" data-max="X">Minons</legend>
                        <div class="js--role-select--items"></div>
                    </fieldset>
                    <fieldset class="js--role-select--team" data-team="demon">
                        <legend class="js--role-select--legend" data-text="Demons ({count}/{max})" data-count="0" data-max="X">Demons</legend>
                        <div class="js--role-select--items"></div>
                    </fieldset>
                    <fieldset class="js--role-select--team" data-team="traveler">
                        <legend class="js--role-select--legend" data-text="Travellers ({count}/{max})" data-count="0" data-max="X">Travellers</legend>
                        <div class="js--role-select--items"></div>
                    </fieldset>
                    <p><button type="submit">Draw</button></p>
                </form>

                <template id="role-select">
                    <div class="js--role-select--role">
                        <div>
                            <label data-text="Quantity for {0}" class="js--role-select--quantity"></label>
                            <input type="range" class="js--role-select--input" value="0" min="0" step="1" max="15">
                            <output class="js--role-select--output" aria-hidden="true">0</output>
                        </div>
                        <label class="js--role-select--label">
                            <input type="checkbox" class="js--role-select--checkbox">
                            <!-- <img class="js--role-select--image"> -->
                            <span class="js--role-select--name"></span>
                            <span class="js--role-select--ability"></span>
                        </label>
                    </div>
                </template>

                <h3>Select your character</h3>
                <ol class="js--role-draw"></ol>

                <template id="role-draw">
                    <button type="button" class="js--role-draw--button"></button>
                </template>

            </div>
        </details>

        <hr>

        <details>
            <summary>Grimoire</summary>
            <div>
                <div class="grimoire js--grimoire--pad">
                </div>
            </div>
        </details>

        <hr>

        <details>
            <summary>Night Order</summary>
            <div>

                <div class="o-row">
                    <div class="o-row__content">
                        <p>First night</p>
                        <ol id="first-night"></ol>
                    </div>
                    <div class="o-row__content">
                        <p>Other nights</p>
                        <ol id="other-nights"></ol>
                    </div>
                </div>
                <label for="show-all">
                    <input type="checkbox" id="show-all">
                    Show all
                </label>

                <template id="night-order-entry">
                    <li class="js--night-order-entry--wrapper">
                        <p><strong class="js--night-order-entry--name"></strong></p>
                        <p class="js--night-order-entry--text"></p>
                        <!-- <img class="js--night-order-entry--image"> -->
                    </li>
                </template>

            </div>
        </details>

        <hr>

        <details>
            <summary>Info Tokens</summary>
            <div>

                <ul id="info-token-custom-holder"></ul>
                <div id="info-token-dialog-holder"></div>
                <p>
                    <button type="button" id="add-info-token">Add custom token</button>
                </p>

            </div>
        </details>

        <hr>

        <!-- <h2>Tokens</h2> -->

        <script>
            if (!Object.groupBy) {

                Object.groupBy = function (collection, getGroup) {

                    return Array.prototype.reduce.call(collection, function (grouped, item, index) {

                        var group = getGroup(item, index);

                        if (!grouped[group]) {
                            grouped[group] = [];
                        }

                        grouped[group].push(item);

                        return grouped;

                    }, Object.create(null));

                };

            }

            if (!Object.hasOwn) {

                Object.hasOwn = function (object, property) {
                    return Object.prototype.hasOwnProperty.call(object, property);
                };

            }
        </script>
        <script>
            var PG = {
                roles: [],
                scripts: {},
            };
        </script>
        <script src="./assets/data/characters/en_GB.js"></script>
        <script src="./assets/data/scripts/en_GB.js"></script>
        <script src="./assets/js/index.js"></script>

    </body>
</html>
